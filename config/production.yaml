# Production Configuration for Citadel Agent

server:
  port: 3000
  host: 0.0.0.0
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 60s
  shutdown_timeout: 15s
  enable_cors: true
  enable_logger: true
  enable_recover: true
  base_path: /api/v1
  debug_mode: false
  request_id_header: X-Request-ID

temporal:
  address: temporal:7233
  namespace: default
  task_queue: citadel-agent-workflows
  workflow_timeout: 60m
  activity_timeout: 10m
  heartbeat_timeout: 5m
  retry_attempts: 3
  max_concurrent_tasks: 100
  enable_metrics: true
  use_tls: false

database:
  host: postgres
  port: 5432
  name: citadel_agent
  user: citadel
  password: ${DB_PASSWORD}
  ssl_mode: disable
  max_connections: 20
  max_idle_connections: 5
  connection_timeout: 30s

redis:
  address: redis:6379
  password: ${REDIS_PASSWORD}
  db: 0
  pool_size: 10
  min_idle_connections: 2
  dial_timeout: 5s
  read_timeout: 3s
  write_timeout: 3s
  pool_timeout: 4s

logging:
  level: info
  format: json
  output: stdout
  enable_request_logging: true
  request_log_level: info

security:
  # Rate limiting configuration
  rate_limit:
    enabled: true
    requests_per_second: 100
    burst_size: 200
  
  # CORS configuration
  cors:
    allow_origins:
      - "https://yourdomain.com"
      - "https://www.yourdomain.com"
    allow_methods:
      - GET
      - POST
      - PUT
      - DELETE
      - OPTIONS
    allow_headers:
      - Origin
      - Content-Type
      - Accept
      - Authorization
      - X-Request-ID
    max_age: 86400  # 24 hours

  # Authentication
  jwt:
    secret: ${JWT_SECRET}
    expiry: 24h
    refresh_expiry: 168h  # 7 days
  
  # HTTPS
  https:
    enabled: true
    redirect_http: true
    hsts: true

plugin_manager:
  max_plugins: 100
  plugin_timeout: 30s
  sandbox_enabled: true
  allow_network_access: false
  max_memory_mb: 256
  max_cpu_percentage: 80

workflow_engine:
  max_parallelism: 10
  default_timeout: 30m
  max_workflow_timeout: 4h
  retry_policy:
    initial_interval: 1s
    backoff_coefficient: 2.0
    maximum_interval: 60s
    maximum_attempts: 5
  circuit_breaker:
    enabled: true
    threshold: 5
    timeout: 60s

monitoring:
  prometheus:
    enabled: true
    path: /metrics
  tracing:
    enabled: false
    endpoint: ""
  logging:
    enabled: true
    level: info